<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_1go6lxw" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.4.1">
  <bpmn:collaboration id="Collaboration_1eltm52">
    <bpmn:participant id="Participant_06zt2k6" name="Payment" processRef="Process_1nqb0rq" />
    <bpmn:participant id="Participant_18tfeay" name="Customer" />
    <bpmn:participant id="Participant_1nn2hbu" name="Bank" />
    <bpmn:messageFlow id="MessageFlow_0s0u7bm" name="Receive payment" sourceRef="Participant_1nn2hbu" targetRef="Task_05bmu93" />
    <bpmn:messageFlow id="MessageFlow_1alx5im" name="Invoice" sourceRef="SendTask_1nbg84m" targetRef="Participant_18tfeay" />
  </bpmn:collaboration>
  <bpmn:process id="Process_1nqb0rq" isExecutable="true">
    <bpmn:laneSet id="LaneSet_1hno4te">
      <bpmn:lane id="Lane_1rt9yqr">
        <bpmn:flowNodeRef>SendTask_1nbg84m</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>StartEvent_1</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_0i2lps8</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_11rx4dm</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_05bmu93</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>IntermediateThrowEvent_0p44xc7</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>IntermediateThrowEvent_0zwnhv0</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>EndEvent_0euf704</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>BusinessRuleTask_1bkw7wy</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>ServiceTask_0kn6hm4</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:dataStoreReference id="DataStoreReference_0cnvf9j" name="Customer DB" />
    <bpmn:sendTask id="SendTask_1nbg84m" name="Submit invoice" camunda:class="edu.thi.mobilityondemand.servicetask.SendInvoiceToCustumer">
      <bpmn:incoming>SequenceFlow_17zqety</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0kvnvhs</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:startEvent id="StartEvent_1">
      <bpmn:outgoing>SequenceFlow_0u2btn1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="SequenceFlow_1u1lnj5" sourceRef="IntermediateThrowEvent_0zwnhv0" targetRef="IntermediateThrowEvent_0p44xc7" />
    <bpmn:sequenceFlow id="SequenceFlow_17zqety" sourceRef="ServiceTask_0kn6hm4" targetRef="SendTask_1nbg84m" />
    <bpmn:sequenceFlow id="SequenceFlow_1e3mszb" sourceRef="BusinessRuleTask_1bkw7wy" targetRef="ServiceTask_0kn6hm4" />
    <bpmn:sequenceFlow id="SequenceFlow_0u2btn1" sourceRef="StartEvent_1" targetRef="Task_11rx4dm" />
    <bpmn:sequenceFlow id="SequenceFlow_1phvg18" sourceRef="Task_11rx4dm" targetRef="Task_0i2lps8" />
    <bpmn:sequenceFlow id="SequenceFlow_06oz3bn" sourceRef="Task_0i2lps8" targetRef="BusinessRuleTask_1bkw7wy" />
    <bpmn:serviceTask id="Task_0i2lps8" name="Get customer discount group">
      <bpmn:incoming>SequenceFlow_1phvg18</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_06oz3bn</bpmn:outgoing>
      <bpmn:property id="Property_0ytapre" name="__targetRef_placeholder" />
      <bpmn:dataInputAssociation id="DataInputAssociation_15rzprl">
        <bpmn:sourceRef>DataStoreReference_0cnvf9j</bpmn:sourceRef>
        <bpmn:targetRef>Property_0ytapre</bpmn:targetRef>
      </bpmn:dataInputAssociation>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_11rx4dm" name="Calculate list price">
      <bpmn:incoming>SequenceFlow_0u2btn1</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1phvg18</bpmn:outgoing>
      <bpmn:property id="Property_0pt5l84" name="__targetRef_placeholder" />
      <bpmn:dataInputAssociation id="DataInputAssociation_12eghm8">
        <bpmn:sourceRef>DataObjectReference_1eeu3yp</bpmn:sourceRef>
        <bpmn:targetRef>Property_0pt5l84</bpmn:targetRef>
      </bpmn:dataInputAssociation>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_0kvnvhs" sourceRef="SendTask_1nbg84m" targetRef="Task_05bmu93" />
    <bpmn:receiveTask id="Task_05bmu93" name="Wait for payment from customer">
      <bpmn:incoming>SequenceFlow_0kvnvhs</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1i2qssf</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:boundaryEvent id="IntermediateThrowEvent_0zwnhv0" name="Wait for 2 weeks" cancelActivity="false" attachedToRef="Task_05bmu93">
      <bpmn:outgoing>SequenceFlow_1u1lnj5</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_0v4h66e" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="SequenceFlow_1i2qssf" sourceRef="Task_05bmu93" targetRef="EndEvent_0euf704" />
    <bpmn:endEvent id="IntermediateThrowEvent_0p44xc7" name="payment unsuccessful">
      <bpmn:incoming>SequenceFlow_1u1lnj5</bpmn:incoming>
      <bpmn:escalationEventDefinition />
    </bpmn:endEvent>
    <bpmn:dataObjectReference id="DataObjectReference_1eeu3yp" name="Route data" dataObjectRef="DataObject_1by1qhd" />
    <bpmn:dataObject id="DataObject_1by1qhd" />
    <bpmn:endEvent id="EndEvent_0euf704" name="Payment successful">
      <bpmn:incoming>SequenceFlow_1i2qssf</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:businessRuleTask id="BusinessRuleTask_1bkw7wy" name="Calculate discount" camunda:resultVariable="discountPercent" camunda:decisionRef="discountTable">
      <bpmn:incoming>SequenceFlow_06oz3bn</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1e3mszb</bpmn:outgoing>
    </bpmn:businessRuleTask>
    <bpmn:serviceTask id="ServiceTask_0kn6hm4" name="Create invoice" camunda:expression="edu.thi.mobilityondemand.servicetask.CreateInvoice">
      <bpmn:incoming>SequenceFlow_1e3mszb</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_17zqety</bpmn:outgoing>
    </bpmn:serviceTask>
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1eltm52">
      <bpmndi:BPMNShape id="Participant_06zt2k6_di" bpmnElement="Participant_06zt2k6" isHorizontal="true">
        <dc:Bounds x="152" y="300" width="1288" height="300" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BusinessRuleTask_1bkw7wy_di" bpmnElement="BusinessRuleTask_1bkw7wy">
        <dc:Bounds x="640" y="430" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_0kn6hm4_di" bpmnElement="ServiceTask_0kn6hm4">
        <dc:Bounds x="800" y="430" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="SendTask_1nbg84m_di" bpmnElement="SendTask_1nbg84m">
        <dc:Bounds x="950" y="430" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="232" y="452" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1e3mszb_di" bpmnElement="SequenceFlow_1e3mszb">
        <di:waypoint x="740" y="470" />
        <di:waypoint x="800" y="470" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_17zqety_di" bpmnElement="SequenceFlow_17zqety">
        <di:waypoint x="900" y="470" />
        <di:waypoint x="950" y="470" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Lane_1rt9yqr_di" bpmnElement="Lane_1rt9yqr" isHorizontal="true">
        <dc:Bounds x="182" y="300" width="1258" height="300" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_18tfeay_di" bpmnElement="Participant_18tfeay" isHorizontal="true">
        <dc:Bounds x="152" y="90" width="1288" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_1nn2hbu_di" bpmnElement="Participant_1nn2hbu" isHorizontal="true">
        <dc:Bounds x="152" y="670" width="1288" height="65" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="MessageFlow_0s0u7bm_di" bpmnElement="MessageFlow_0s0u7bm">
        <di:waypoint x="1140" y="670" />
        <di:waypoint x="1140" y="510" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1147" y="619" width="85" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="MessageFlow_1alx5im_di" bpmnElement="MessageFlow_1alx5im">
        <di:waypoint x="1000" y="430" />
        <di:waypoint x="1000" y="170" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1012" y="253" width="35" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1u1lnj5_di" bpmnElement="SequenceFlow_1u1lnj5">
        <di:waypoint x="1208" y="510" />
        <di:waypoint x="1282" y="510" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0u2btn1_di" bpmnElement="SequenceFlow_0u2btn1">
        <di:waypoint x="268" y="470" />
        <di:waypoint x="330" y="470" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="DataObjectReference_1eeu3yp_di" bpmnElement="DataObjectReference_1eeu3yp">
        <dc:Bounds x="232" y="335" width="36" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="223" y="392" width="54" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="DataInputAssociation_12eghm8_di" bpmnElement="DataInputAssociation_12eghm8">
        <di:waypoint x="268" y="376" />
        <di:waypoint x="333" y="434" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="DataStoreReference_0cnvf9j_di" bpmnElement="DataStoreReference_0cnvf9j">
        <dc:Bounds x="515" y="215" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="507" y="191" width="67" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="DataInputAssociation_15rzprl_di" bpmnElement="DataInputAssociation_15rzprl">
        <di:waypoint x="540" y="265" />
        <di:waypoint x="540" y="430" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1phvg18_di" bpmnElement="SequenceFlow_1phvg18">
        <di:waypoint x="430" y="470" />
        <di:waypoint x="490" y="470" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_06oz3bn_di" bpmnElement="SequenceFlow_06oz3bn">
        <di:waypoint x="590" y="470" />
        <di:waypoint x="640" y="470" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_0wjx1sr_di" bpmnElement="Task_0i2lps8">
        <dc:Bounds x="490" y="430" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_0ziuprn_di" bpmnElement="Task_11rx4dm">
        <dc:Bounds x="330" y="430" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_108jp71_di" bpmnElement="IntermediateThrowEvent_0p44xc7">
        <dc:Bounds x="1282" y="492" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1268" y="536.5" width="64" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0kvnvhs_di" bpmnElement="SequenceFlow_0kvnvhs">
        <di:waypoint x="1050" y="470" />
        <di:waypoint x="1090" y="470" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="BoundaryEvent_0tuf7jy_di" bpmnElement="IntermediateThrowEvent_0zwnhv0">
        <dc:Bounds x="1172" y="492" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1149" y="543" width="81" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ReceiveTask_0qvb7ru_di" bpmnElement="Task_05bmu93">
        <dc:Bounds x="1090" y="430" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1i2qssf_di" bpmnElement="SequenceFlow_1i2qssf">
        <di:waypoint x="1190" y="470" />
        <di:waypoint x="1362" y="470" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_0wst7v2_di" bpmnElement="EndEvent_0euf704">
        <dc:Bounds x="1362" y="452" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1354" y="495" width="52" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
